name: Validate actions

on:
  pull_request:
    types: [opened, reopened, synchronize]
    branches: main

  workflow_dispatch:

jobs:
  check-preconditions:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      # - uses: ./actions/check-action-references

  #test-detect-branch-version:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-detect-branch-version

  #test-install-wasm-pack:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-install-wasm-pack

  #test-print-rust-info:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-print-rust-info

  #test-detect-project-tech:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-detect-project-tech

  #test-artifact-version:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-artifact-version

  #test-validate-rust-crate:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-validate-rust-crate

  #test-validate-npm-package:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-validate-npm-package

  #test-publish-rust-crate:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-publish-rust-crate

  #test-publish-npm-package:
  #  runs-on: ubuntu-latest
  #  needs: check-preconditions
  #  steps:
  #    - uses: actions/checkout@v4
  #    - uses: ./.github/test-actions/test-publish-npm-package

  test-validate-rust-wasm:
    runs-on: ubuntu-latest
    needs: check-preconditions
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/test-actions/test-validate-rust-wasm

  validate:
    runs-on: ubuntu-latest
    needs:
      #  - test-detect-branch-version
      #  - test-install-wasm-pack
      #  - test-print-rust-info
      #  - test-detect-project-tech
      # - test-artifact-version
      # - test-validate-rust-crate
      # - test-validate-npm-package
      # - test-publish-rust-crate
      # - test-publish-npm-package
      - test-validate-rust-wasm

    steps:
      - name: Test branch
        shell: bash
        run: echo "âœ…Validation complete!"
